# MPI
MPI信息传递
## 配置与构建
配置参考ppt中说明  
在visual studio中build项目
## 运行
在cmd命令行中输入mpiexec -n 4 main.exe以四进程运行
## 说明
MPI并行计算程序中利用利用主从进程进行并行计算。  
对于主进程，首先实现对矩阵a和列向量b赋初值。因为发送给每个从进程的列向量b是相同的，所以利用MPI_Bcast函数快速广播给所有进程。再将矩阵a分拆为不同的行向量复制到缓冲区buff中，利用MPI_Send函数在标签tag=10下依次发送到其他所有的从进程中。当矩阵a的所有数据发送完毕时，最后发送标签tag=0的终止信号。  
对于从进程，首先接收来自主进程广播的列向量b的数据。然后利用函数MPI_Recv接收矩阵a分拆而来的行向量。从进程接收到一个行向量后，可以立即计算结果。计算完成后将计算结果在标签tag=99下发送给主进程。当从进程接收到的数据标签tag=0时，表面所有数据传送完毕，终止接收函数。  
最后主进程在标签tag=99下接收来自所有从进程的计算结果，并把结果输出展示。程序源代码如下所示。 

# OpenMP计算pi值
## 配置
在visual studio项目属性中打开OpenMP支持
## 运行
测试计算机的CPU为四核八线程，故最大线程设置为8。  
直接在命令行中运行
## 说明
对pi的计算可以采用离散公式计算。可以看到对于相加的每一项而言，它们之间是独立的，即任一项的计算结果不依赖于其他任何项。这种特性有利于将串行计算程序改造成并行计算程序。
在计算时采用规约子句reduction(+:sum)对每个线程创建私有变量sum副本，并在并行循环结束后使各个线程的sum相加到一起。最后在屏幕上输出相关信息。每个算例计算100次取计算时间的平均值。
